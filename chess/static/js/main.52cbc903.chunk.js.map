{"version":3,"sources":["index.js"],"names":["window","board","selected","valids","turn","bad","lastboard","getValidMoves","n","parseInt","p","moves","i","wh","toUpperCase","toLowerCase","push","ret","j","length","tb","isCheck","splice","indexOf","b","t","isStalemate","concat","isCheckmate","Square","props","clicked","state","event","document","createEvent","initEvent","dispatchEvent","setState","fg","addEventListener","piece","this","style","backgroundColor","onClick","id","className","src","alt","class","React","Component","Error","reset","er","text","Board","getPos","s","e","ReactDOM","render","getElementById","target","substring"],"mappings":"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","file":"static/js/main.52cbc903.chunk.js","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nwindow.board = [\"K\", \"N\", \"R\", \"\", \"\", \"r\", \"n\", \"k\"];\r\nwindow.selected = null;\r\nwindow.valids = [];\r\nwindow.turn = 0;\r\nwindow.bad = \"\";\r\n\r\nwindow.lastboard = [\"K\", \"N\", \"R\", \"\", \"\", \"r\", \"n\", \"k\"];\r\n\r\nwindow.getValidMoves = (n) => {\r\n    n = parseInt(n);\r\n    let p = window.board[n];\r\n    let moves = [];\r\n    let i = n;\r\n    let wh = p === p.toUpperCase();\r\n    \r\n    if ((wh && window.turn === 1) || (!wh && window.turn === 0)) { return moves };\r\n\r\n    if (p.toLowerCase() === \"k\") {\r\n        i = n + 1;\r\n        if ((i < 8) && (window.board[i] === \"\" || ((window.board[i] === window.board[i].toUpperCase()) && window.turn === 1) || ((window.board[i] !== window.board[i].toUpperCase()) && window.turn === 0))) {\r\n            moves.push(i);\r\n        }\r\n        i = n - 1;\r\n        if ((i > -1) && (window.board[i] === \"\" || ((window.board[i] === window.board[i].toUpperCase()) && window.turn === 1) || ((window.board[i] !== window.board[i].toUpperCase()) && window.turn === 0))) {\r\n            moves.push(i);\r\n        }\r\n    } else if (p.toLowerCase() === \"n\") {\r\n        i = n + 2;\r\n        if ((i < 8) && (window.board[i] === \"\" || ((window.board[i] === window.board[i].toUpperCase()) && window.turn === 1) || ((window.board[i] !== window.board[i].toUpperCase()) && window.turn === 0))) {\r\n            moves.push(i);\r\n        }\r\n        i = n - 2;\r\n        if ((i > -1) && (window.board[i] === \"\" || ((window.board[i] === window.board[i].toUpperCase()) && window.turn === 1) || ((window.board[i] !== window.board[i].toUpperCase()) && window.turn === 0))) {\r\n            moves.push(i);\r\n        }\r\n    } else if (p.toLowerCase() === \"r\") {\r\n        i = n + 1;\r\n        while ((i < 8) && (window.board[i] === \"\" || ((window.board[i] === window.board[i].toUpperCase()) && window.turn === 1) || ((window.board[i] !== window.board[i].toUpperCase()) && window.turn === 0))) {\r\n            moves.push(i);\r\n            if (window.board[i] !== \"\") {\r\n                break;\r\n            } else {\r\n                i++;\r\n            }\r\n        }\r\n        i = n - 1;\r\n        while ((i > -1) && (window.board[i] === \"\" || ((window.board[i] === window.board[i].toUpperCase()) && window.turn === 1) || ((window.board[i] !== window.board[i].toUpperCase()) && window.turn === 0))) {\r\n            moves.push(i);\r\n            if (window.board[i] !== \"\") {\r\n                break;\r\n            } else {\r\n                i--;\r\n            }\r\n        }\r\n    }\r\n\r\n    let ret = [...moves];\r\n\r\n    for (let j = 0;j < moves.length;j++) {\r\n        let tb = [...window.board]\r\n        tb[moves[j]] = p;\r\n        tb[n] = \"\";\r\n        if (window.isCheck(tb, window.turn)) {\r\n            ret.splice(ret.indexOf(moves[j]), 1);\r\n        }\r\n    }\r\n\r\n    return ret;\r\n}\r\n\r\nwindow.isCheck = (b, t) => {\r\n    for (let i = 0;i < 8;i++) {\r\n        if (b[i] === ((t === 0) ? \"K\" : \"k\")) {\r\n            if (i + 2 < 8 && b[i + 2] === ((t === 0) ? \"n\" : \"N\")) { return true; }\r\n            if (i - 2 > -1 && b[i - 2] === ((t === 0) ? \"n\" : \"N\")) { return true; }\r\n            if (i + 1 < 8 && b[i + 1] === ((t === 0) ? \"k\" : \"K\")) { return true; }\r\n            if (i - 1 > -1 && b[i - 1] === ((t === 0) ? \"k\" : \"K\")) { return true; }\r\n\r\n            for (let j = 1;j < 8;j++) {\r\n                if (i + j < 8 && b[i + j] === ((t === 0) ? \"r\" : \"R\")) { return true; }\r\n                if (b[i + j] !== \"\") { break; }\r\n            }\r\n            for (let j = 1;j < 8;j++) {\r\n                if (i - j > -1 && b[i - j] === ((t === 0) ? \"r\" : \"R\")) { return true; }\r\n                if (b[i - j] !== \"\") { break; }\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nwindow.isStalemate = () => {\r\n    let moves = [];\r\n    \r\n    for (let i=0;i<9;i++) {\r\n        if (i === 8) {\r\n            return true;\r\n        } else if (window.board[i].toLowerCase() !== \"k\" && window.board[i] !== \"\") {\r\n            break;\r\n        }\r\n    }\r\n\r\n    for (let i=0;i<9;i++) {\r\n        if (i === 8) {\r\n            return true;\r\n        }\r\n        if (window.board[i].toLowerCase() === \"r\") {\r\n            break\r\n        }\r\n    }\r\n\r\n    for (let i=0;i<8;i++) {\r\n        if ((window.turn === 0) === (window.board[i] === window.board[i].toUpperCase() && window.board[i] !== \"\")) {\r\n            moves = moves.concat(window.getValidMoves(i));\r\n        }\r\n    }\r\n\r\n    return (moves.length === 0 && !(window.isCheck(window.board, window.turn)));\r\n}\r\n\r\nwindow.isCheckmate = () => {\r\n    let moves = [];\r\n\r\n    for (let i=0;i<8;i++) {\r\n        if ((window.turn === 0) === (window.board[i] === window.board[i].toUpperCase() && window.board[i] !== \"\")) {\r\n            moves = moves.concat(window.getValidMoves(i));\r\n        }\r\n    }\r\n\r\n    return (moves.length === 0);\r\n}\r\n\r\nclass Square extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            selected: false,\r\n            fg: ((props.n % 2 === 0) ? \"#769656\" : \"#eeeed2\"),\r\n            n: props.n,\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        document.addEventListener(\"validMove\", () => {\r\n            this.setState({selected: false,});\r\n        });\r\n        document.addEventListener(\"deselectAll\", () => {\r\n            window.valids = [];\r\n            this.setState({selected: false,});\r\n        });\r\n    }\r\n    render() {\r\n        let piece = window.board[this.state.n];\r\n        let fg = ((this.state.selected) ? \"#baca44\" : this.state.fg);\r\n        if (piece === \"\") {\r\n            if (window.valids.indexOf(parseInt(this.state.n)) > -1) {\r\n                return (\r\n                    <td style = {{backgroundColor: fg}} onClick = {() => this.clicked()} id={\"sq\" + this.state.n}>\r\n                        <img className =\"dot\" id=\"dot\" src={\"img/dot.png\"} alt=\"available move\"></img>\r\n                    </td>\r\n                )\r\n            } else {\r\n                return (<td style = {{backgroundColor: fg}} onClick = {() => this.clicked()} id={\"sq\" + this.state.n}></td>);\r\n            }\r\n            \r\n        } else {\r\n            if (window.valids.indexOf(parseInt(this.state.n)) > -1) {\r\n                return (\r\n                    <td style = {{backgroundColor: fg}} onClick = {() => this.clicked()} id={\"sq\" + this.state.n} >\r\n                        <div class=\"dotDiv\">\r\n                            <img id = \"img\" src = { \"img/\" + piece.toUpperCase() + ((piece === piece.toUpperCase()) ? \"w\" : \"b\") + \".png\" } alt = \"chess piece\" />\r\n                            <img className = \"fdot\" id = \"dot\" src = \"img/dot.png\" alt = \"dot overlay\" />\r\n                        </div>\r\n                    </td>\r\n                )\r\n                // return (\r\n                //     <td style = {{backgroundColor: fg}} onClick = {() => this.clicked()} id={\"dsq\" + piece}>\r\n                //         <img className =\"dot\" id=\"dot\" src={\"img/dot.png\"} alt=\"available move\"></img>\r\n                //     </td>\r\n                // );\r\n            } else {\r\n                return (\r\n                    <td style = {{backgroundColor: fg}} onClick = {() => this.clicked()} id={\"sq\" + this.state.n} >\r\n                        <img id = \"img\" src = { \"img/\" + piece.toUpperCase() + ((piece === piece.toUpperCase()) ? \"w\" : \"b\") + \".png\" } alt = \"chess piece\" /> \r\n                    </td>\r\n                );\r\n            }\r\n        } \r\n    }\r\n    clicked = () => {\r\n        window.bad = \"\";\r\n        if (this.state.selected) {\r\n            let event = document.createEvent(\"MouseEvents\");\r\n            event.initEvent(\"deselectAll\", true, true);\r\n            document.dispatchEvent(event);\r\n        } else {\r\n            if (window.board[this.state.n] !== \"\") {\r\n                if (window.selected === null) {\r\n                    window.valids = window.getValidMoves(parseInt(this.state.n));\r\n                    window.selected = parseInt(this.state.n);\r\n                    let event = document.createEvent(\"MouseEvents\");\r\n                    event.initEvent(\"validMove\", true, true);\r\n                    document.dispatchEvent(event);\r\n                    this.setState({selected: true,});\r\n                } else {\r\n                    if (((window.board[window.selected] === window.board[window.selected].toUpperCase()) ^ (window.board[this.state.n] === window.board[this.state.n].toUpperCase())) === 1 && (window.valids.indexOf(parseInt(this.state.n)) > -1)) {\r\n                        // Legit take.\r\n                        window.board[this.state.n] = window.board[window.selected];\r\n                        window.board[window.selected] = \"\";\r\n                        window.selected = null;\r\n                        window.turn = (window.turn + 1) % 2 \r\n                        window.valids = [];\r\n                        this.setState({selected: false});\r\n                        let event = document.createEvent(\"MouseEvents\");\r\n                        event.initEvent(\"deselectAll\", true, true);\r\n                        document.dispatchEvent(event);\r\n                    } else {\r\n                        let event = document.createEvent(\"MouseEvents\");\r\n                        event.initEvent(\"deselectAll\", true, true);\r\n                        document.dispatchEvent(event);\r\n                        window.selected = this.state.n;\r\n                        window.valids = window.getValidMoves(this.state.n);\r\n                        this.setState({selected: true,})\r\n                    }   \r\n                }\r\n            } else {\r\n                if (window.valids.indexOf(parseInt(this.state.n)) > -1) {\r\n                    window.board[this.state.n] = window.board[window.selected];\r\n                    window.board[window.selected] = \"\";\r\n                    window.selected = null;\r\n                    window.turn = (window.turn + 1) % 2 \r\n                    window.valids = [];\r\n                    this.setState({selected: false});\r\n                    let event = document.createEvent(\"MouseEvents\");\r\n                    event.initEvent(\"deselectAll\", true, true);\r\n                    document.dispatchEvent(event);\r\n                } else {\r\n                    let event = document.createEvent(\"MouseEvents\");\r\n                    event.initEvent(\"deselectAll\", true, true);\r\n                    document.dispatchEvent(event);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass Error extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            er: props.text,\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        document.addEventListener(\"deselectAll\", () => {\r\n            this.setState({er: window.bad,});\r\n        })\r\n    }\r\n    render() {\r\n        if (window.isStalemate()) {\r\n            return (\r\n                <p id=\"warning\">Stalemate. <span id=\"restart\" onClick={() => this.reset()} >Click here to restart.</span></p>\r\n            )\r\n        } else if (window.isCheckmate()) {\r\n            return (\r\n                <p id=\"win\">{((window.turn === 0) ? \"Black\" : \"White\")} has won by checkmate. <span id=\"restart\" onClick = {() => this.reset()} >Click here to restart.</span></p>\r\n            )\r\n        } else {\r\n            return (<p></p>);\r\n        }\r\n    }\r\n    reset = () => {\r\n        window.board = [\"K\", \"N\", \"R\", \"\", \"\", \"r\", \"n\", \"k\"];\r\n        window.turn = 0;\r\n        let event = document.createEvent(\"MouseEvents\");\r\n        event.initEvent(\"deselectAll\", true, true);\r\n        document.dispatchEvent(event);\r\n    }\r\n}\r\n\r\nclass Board extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            board: [\"K\", \"N\", \"R\", \"\", \"\", \"r\", \"n\", \"k\",],\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <center>\r\n                <table id=\"board\"><tbody><tr>\r\n                    <Square n=\"0\" />\r\n                    <Square n=\"1\" />\r\n                    <Square n=\"2\" />\r\n                    <Square n=\"3\" />\r\n                    <Square n=\"4\" />\r\n                    <Square n=\"5\" />\r\n                    <Square n=\"6\" />\r\n                    <Square n=\"7\" />\r\n                </tr></tbody></table>\r\n                <Error text={window.bad} />\r\n            </center>\r\n        );\r\n    }\r\n    getPos = (p, s, e) => {\r\n        let b = this.state.board;\r\n        b[s] = \"\";\r\n        b[e] = p;\r\n        return b;\r\n    }\r\n    \r\n}\r\n\r\nReactDOM.render(<Board />, document.getElementById(\"root\"));\r\n\r\ndocument.addEventListener(\"click\", (e) => {\r\n    if (e.target.id.substring(0, 2) === \"sq\" || e.target.id === \"img\" || e.target.id === \"dot\") {\r\n        return false;\r\n    }\r\n    let event = document.createEvent(\"MouseEvents\");\r\n    event.initEvent(\"deselectAll\", true, true);\r\n    document.dispatchEvent(event);\r\n});"],"sourceRoot":""}